<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      GLB Texture Re-encode (PNG quant + JPEG + Resize + ZIP + Multi)
    </title>
    <style>
      :root {
        color-scheme: dark light;
      }
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        margin: 24px;
      }
      h1 {
        margin: 0 0 12px;
      }
      .row {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
        margin-bottom: 12px;
      }
      label {
        font-weight: 600;
      }
      input[type="range"] {
        width: 260px;
      }
      select {
        padding: 6px;
      }
      #log {
        white-space: pre-wrap;
        background: rgba(0, 0, 0, 0.06);
        padding: 12px;
        border-radius: 8px;
        max-width: 1000px;
        min-height: 140px;
      }
      button {
        padding: 8px 12px;
        font-weight: 600;
      }
      .hidden {
        display: none;
      }
      small {
        opacity: 0.8;
      }
      .btns {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }
    </style>
  </head>
  <body>
    <h1>GLB Texture Re-encoder</h1>

    <div class="row">
      <label for="file">GLB file(s):</label>
      <input id="file" type="file" accept=".glb" multiple />
      <small>Select one or many .glb files</small>
    </div>

    <div class="row">
      <label for="resizeFactor">Resize factor:</label>
      <select id="resizeFactor">
        <option value="1">1× (no resize)</option>
        <option value="0.5">1/2</option>
        <option value="0.25">1/4</option>
        <option value="0.125">1/8</option>
      </select>
      <small>Applied to all textures before re-encoding</small>
    </div>

    <div class="row">
      <label for="pngColors">PNG colors:</label>
      <input
        id="pngColors"
        type="range"
        min="16"
        max="256"
        step="16"
        value="128"
      />
      <span id="pngColorsVal">128</span>
      <small>(lossy PNG quantization; preserves alpha)</small>
    </div>

    <div class="row">
      <label for="jpegQ">JPEG quality:</label>
      <input
        id="jpegQ"
        type="range"
        min="0.1"
        max="0.95"
        step="0.05"
        value="0.7"
      />
      <span id="jpegQVal">0.70</span>
    </div>

    <div class="row btns" style="margin-top: 8px">
      <button id="run" disabled>Re-encode & Export</button>
      <a id="download" class="hidden">Download</a>
      <button id="exportZip" disabled>Export Textures ZIP</button>
      <a id="zipLink" class="hidden" download="textures.zip">Download ZIP</a>
    </div>

    <div id="log">Load .glb file(s) to begin…</div>

    <script type="module" src="/main.js"></script>
  </body>
</html>
